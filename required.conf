# Configuration file for Webserv

# Define a server block for HTTP server
server {
    # Listen on port 80
    listen 80;
    
    # Set the server name
    server_name example.com;

    # Configure default error pages
    error_page 404 /404.html;
    error_page 500 /500.html;

    # Limit client body size to 10MB
    client_max_body_size 10M;

    # Define a route
    location / {
        # Allow GET and POST methods
        allow_methods GET POST;
        
        # Set default file for directory
        index index.html;
        
        # Enable directory listing
        autoindex on;
        
        # Specify the root directory
        root /var/www/html;
    }

    # Define another route
    location /uploads {
        # Allow only POST method
        allow_methods POST;
        
        # Set directory for uploaded files
        upload_store /var/www/uploads;
        
        # Specify the location to store uploaded files
        upload_location /uploads;
    }

    # Define a route for CGI
    location /cgi-bin {
        # Allow only specific file extensions for CGI
        cgi_extension .php;
        
        # Specify the CGI script for processing
        fastcgi_pass unix:/var/run/php-fpm.sock;
    }
}
